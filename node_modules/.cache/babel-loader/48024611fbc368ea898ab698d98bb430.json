{"ast":null,"code":"/**\n * @fileOverview shape util\n * @author dxq613@gmail.com\n */\nconst Util = require('../../util/common');\n\nconst ShapeUtil = {\n  splitPoints(obj) {\n    const points = [];\n    const x = obj.x;\n    let y = obj.y;\n    y = Util.isArray(y) ? y : [y];\n    y.forEach(function (yItem, index) {\n      const point = {\n        x: Util.isArray(x) ? x[index] : x,\n        y: yItem\n      };\n      points.push(point);\n    });\n    return points;\n  },\n\n  splitArray(data, yField, connectNulls) {\n    if (!data.length) return [];\n    const arr = [];\n    let tmp = [];\n    let yValue;\n    Util.each(data, function (obj) {\n      yValue = obj._origin ? obj._origin[yField] : obj[yField];\n\n      if (connectNulls) {\n        if (!Util.isNil(yValue)) {\n          tmp.push(obj);\n        }\n      } else {\n        if (Util.isArray(yValue) && Util.isNil(yValue[0]) || Util.isNil(yValue)) {\n          if (tmp.length) {\n            arr.push(tmp);\n            tmp = [];\n          }\n        } else {\n          tmp.push(obj);\n        }\n      }\n    });\n\n    if (tmp.length) {\n      arr.push(tmp);\n    }\n\n    return arr;\n  }\n\n};\nmodule.exports = ShapeUtil;","map":{"version":3,"sources":["/home/sunxuming/react-typescript/node_modules/_@antv_f2@3.6.0-alpha.2@@antv/f2/src/geom/shape/util.js"],"names":["Util","require","ShapeUtil","splitPoints","obj","points","x","y","isArray","forEach","yItem","index","point","push","splitArray","data","yField","connectNulls","length","arr","tmp","yValue","each","_origin","isNil","module","exports"],"mappings":"AAAA;;;;AAKA,MAAMA,IAAI,GAAGC,OAAO,CAAC,mBAAD,CAApB;;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,WAAW,CAACC,GAAD,EAAM;AACf,UAAMC,MAAM,GAAG,EAAf;AACA,UAAMC,CAAC,GAAGF,GAAG,CAACE,CAAd;AACA,QAAIC,CAAC,GAAGH,GAAG,CAACG,CAAZ;AACAA,IAAAA,CAAC,GAAGP,IAAI,CAACQ,OAAL,CAAaD,CAAb,IAAkBA,CAAlB,GAAsB,CAAEA,CAAF,CAA1B;AACAA,IAAAA,CAAC,CAACE,OAAF,CAAU,UAASC,KAAT,EAAgBC,KAAhB,EAAuB;AAC/B,YAAMC,KAAK,GAAG;AACZN,QAAAA,CAAC,EAAEN,IAAI,CAACQ,OAAL,CAAaF,CAAb,IAAkBA,CAAC,CAACK,KAAD,CAAnB,GAA6BL,CADpB;AAEZC,QAAAA,CAAC,EAAEG;AAFS,OAAd;AAIAL,MAAAA,MAAM,CAACQ,IAAP,CAAYD,KAAZ;AACD,KAND;AAOA,WAAOP,MAAP;AACD,GAde;;AAehBS,EAAAA,UAAU,CAACC,IAAD,EAAOC,MAAP,EAAeC,YAAf,EAA6B;AACrC,QAAI,CAACF,IAAI,CAACG,MAAV,EAAkB,OAAO,EAAP;AAClB,UAAMC,GAAG,GAAG,EAAZ;AACA,QAAIC,GAAG,GAAG,EAAV;AACA,QAAIC,MAAJ;AACArB,IAAAA,IAAI,CAACsB,IAAL,CAAUP,IAAV,EAAgB,UAASX,GAAT,EAAc;AAC5BiB,MAAAA,MAAM,GAAGjB,GAAG,CAACmB,OAAJ,GAAcnB,GAAG,CAACmB,OAAJ,CAAYP,MAAZ,CAAd,GAAoCZ,GAAG,CAACY,MAAD,CAAhD;;AACA,UAAIC,YAAJ,EAAkB;AAChB,YAAI,CAACjB,IAAI,CAACwB,KAAL,CAAWH,MAAX,CAAL,EAAyB;AACvBD,UAAAA,GAAG,CAACP,IAAJ,CAAST,GAAT;AACD;AACF,OAJD,MAIO;AACL,YAAKJ,IAAI,CAACQ,OAAL,CAAaa,MAAb,KAAwBrB,IAAI,CAACwB,KAAL,CAAWH,MAAM,CAAC,CAAD,CAAjB,CAAzB,IAAmDrB,IAAI,CAACwB,KAAL,CAAWH,MAAX,CAAvD,EAA2E;AACzE,cAAID,GAAG,CAACF,MAAR,EAAgB;AACdC,YAAAA,GAAG,CAACN,IAAJ,CAASO,GAAT;AACAA,YAAAA,GAAG,GAAG,EAAN;AACD;AACF,SALD,MAKO;AACLA,UAAAA,GAAG,CAACP,IAAJ,CAAST,GAAT;AACD;AACF;AACF,KAhBD;;AAkBA,QAAIgB,GAAG,CAACF,MAAR,EAAgB;AACdC,MAAAA,GAAG,CAACN,IAAJ,CAASO,GAAT;AACD;;AAED,WAAOD,GAAP;AACD;;AA3Ce,CAAlB;AA8CAM,MAAM,CAACC,OAAP,GAAiBxB,SAAjB","sourcesContent":["/**\n * @fileOverview shape util\n * @author dxq613@gmail.com\n */\n\nconst Util = require('../../util/common');\n\nconst ShapeUtil = {\n  splitPoints(obj) {\n    const points = [];\n    const x = obj.x;\n    let y = obj.y;\n    y = Util.isArray(y) ? y : [ y ];\n    y.forEach(function(yItem, index) {\n      const point = {\n        x: Util.isArray(x) ? x[index] : x,\n        y: yItem\n      };\n      points.push(point);\n    });\n    return points;\n  },\n  splitArray(data, yField, connectNulls) {\n    if (!data.length) return [];\n    const arr = [];\n    let tmp = [];\n    let yValue;\n    Util.each(data, function(obj) {\n      yValue = obj._origin ? obj._origin[yField] : obj[yField];\n      if (connectNulls) {\n        if (!Util.isNil(yValue)) {\n          tmp.push(obj);\n        }\n      } else {\n        if ((Util.isArray(yValue) && Util.isNil(yValue[0])) || Util.isNil(yValue)) {\n          if (tmp.length) {\n            arr.push(tmp);\n            tmp = [];\n          }\n        } else {\n          tmp.push(obj);\n        }\n      }\n    });\n\n    if (tmp.length) {\n      arr.push(tmp);\n    }\n\n    return arr;\n  }\n};\n\nmodule.exports = ShapeUtil;\n"]},"metadata":{},"sourceType":"script"}