{"ast":null,"code":"/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nconst supportsEventListenerOptions = function () {\n  let supports = false;\n\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        supports = true;\n      }\n\n    });\n    window.addEventListener('e', null, options);\n  } catch (e) {// continue regardless of error\n  }\n\n  return supports;\n}(); // Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\n\n\nconst eventListenerOptions = supportsEventListenerOptions ? {\n  passive: true\n} : false;\n/* global wx, my */\n// weixin miniprogram\n\nconst isWx = typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function'; // ant miniprogram\n\nconst isMy = typeof my === 'object' && typeof my.getSystemInfoSync === 'function'; // in node\n\nconst isNode = typeof module !== 'undefined' && typeof module.exports !== 'undefined'; // in browser\n\nconst isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.sessionStorage !== 'undefined';\n\nfunction isCanvasElement(el) {\n  if (!el || typeof el !== 'object') return false;\n\n  if (el.nodeType === 1 && el.nodeName) {\n    // HTMLCanvasElement\n    return true;\n  } // CanvasElement\n\n\n  return !!el.isCanvasElement;\n}\n\nfunction getPixelRatio() {\n  return window && window.devicePixelRatio || 1;\n}\n\nfunction getStyle(el, property) {\n  return el.currentStyle ? el.currentStyle[property] : document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n}\n\nfunction getWidth(el) {\n  let width = getStyle(el, 'width');\n\n  if (width === 'auto') {\n    width = el.offsetWidth;\n  }\n\n  return parseFloat(width);\n}\n\nfunction getHeight(el) {\n  let height = getStyle(el, 'height');\n\n  if (height === 'auto') {\n    height = el.offsetHeight;\n  }\n\n  return parseFloat(height);\n}\n\nfunction getDomById(id) {\n  if (!id) {\n    return null;\n  }\n\n  return document.getElementById(id);\n}\n\nfunction getRelativePosition(point, canvas) {\n  const canvasDom = canvas.get('el');\n  if (!canvasDom) return point;\n  const {\n    top,\n    right,\n    bottom,\n    left\n  } = canvasDom.getBoundingClientRect();\n  const paddingLeft = parseFloat(getStyle(canvasDom, 'padding-left'));\n  const paddingTop = parseFloat(getStyle(canvasDom, 'padding-top'));\n  const paddingRight = parseFloat(getStyle(canvasDom, 'padding-right'));\n  const paddingBottom = parseFloat(getStyle(canvasDom, 'padding-bottom'));\n  const width = right - left - paddingLeft - paddingRight;\n  const height = bottom - top - paddingTop - paddingBottom;\n  const pixelRatio = canvas.get('pixelRatio');\n  const mouseX = (point.x - left - paddingLeft) / width * canvasDom.width / pixelRatio;\n  const mouseY = (point.y - top - paddingTop) / height * canvasDom.height / pixelRatio;\n  return {\n    x: mouseX,\n    y: mouseY\n  };\n}\n\nfunction addEventListener(source, type, listener) {\n  source.addEventListener(type, listener, eventListenerOptions);\n}\n\nfunction removeEventListener(source, type, listener) {\n  source.removeEventListener(type, listener, eventListenerOptions);\n}\n\nfunction createEventObj(type, chart, x, y, nativeEvent) {\n  return {\n    type,\n    chart,\n    native: nativeEvent || null,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null\n  };\n}\n\nfunction createEvent(event, chart) {\n  const type = event.type;\n  let clientPoint; // 说明是touch相关事件\n\n  if (event.touches) {\n    // https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/changedTouches\n    // 这里直接拿changedTouches就可以了，不管是touchstart, touchmove, touchend changedTouches 都是有的\n    // 为了以防万一，做个空判断\n    const touch = event.changedTouches[0] || {}; // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n\n    const {\n      x,\n      y,\n      clientX,\n      clientY\n    } = touch; // 小程序环境会有x,y，这里就直接返回\n\n    if (x && y) {\n      return createEventObj(type, chart, x, y, event);\n    }\n\n    clientPoint = {\n      x: clientX,\n      y: clientY\n    };\n  } else {\n    // mouse相关事件\n    clientPoint = {\n      x: event.clientX,\n      y: event.clientY\n    };\n  } // 理论上应该是只有有在浏览器环境才会走到这里\n\n\n  const canvas = chart.get('canvas'); // 通过clientX, clientY 计算x, y\n\n  const point = getRelativePosition(clientPoint, canvas);\n  return createEventObj(type, chart, point.x, point.y, event);\n}\n\nfunction measureText(text, font, ctx) {\n  if (!ctx) {\n    ctx = document.createElement('canvas').getContext('2d');\n  }\n\n  ctx.font = font || '12px sans-serif';\n  return ctx.measureText(text);\n}\n\nexport { isWx, isMy, isNode, isBrowser, isCanvasElement, getPixelRatio, getStyle, getWidth, getHeight, getDomById, getRelativePosition, addEventListener, removeEventListener, createEvent, measureText };","map":{"version":3,"sources":["/home/sunxuming/react-typescript/node_modules/_@antv_f2@3.6.0-alpha.2@@antv/f2/src/util/dom.js"],"names":["supportsEventListenerOptions","supports","options","Object","defineProperty","get","window","addEventListener","e","eventListenerOptions","passive","isWx","wx","getSystemInfoSync","isMy","my","isNode","module","exports","isBrowser","document","sessionStorage","isCanvasElement","el","nodeType","nodeName","getPixelRatio","devicePixelRatio","getStyle","property","currentStyle","defaultView","getComputedStyle","getPropertyValue","getWidth","width","offsetWidth","parseFloat","getHeight","height","offsetHeight","getDomById","id","getElementById","getRelativePosition","point","canvas","canvasDom","top","right","bottom","left","getBoundingClientRect","paddingLeft","paddingTop","paddingRight","paddingBottom","pixelRatio","mouseX","x","mouseY","y","source","type","listener","removeEventListener","createEventObj","chart","nativeEvent","native","undefined","createEvent","event","clientPoint","touches","touch","changedTouches","clientX","clientY","measureText","text","font","ctx","createElement","getContext"],"mappings":"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","sourcesContent":["/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nconst supportsEventListenerOptions = (function() {\n  let supports = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        supports = true;\n      }\n    });\n    window.addEventListener('e', null, options);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return supports;\n}());\n\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\nconst eventListenerOptions = supportsEventListenerOptions ? { passive: true } : false;\n\n/* global wx, my */\n// weixin miniprogram\nconst isWx = (typeof wx === 'object') && (typeof wx.getSystemInfoSync === 'function');\n// ant miniprogram\nconst isMy = (typeof my === 'object') && (typeof my.getSystemInfoSync === 'function');\n// in node\nconst isNode = (typeof module !== 'undefined') && (typeof module.exports !== 'undefined');\n// in browser\nconst isBrowser = (typeof window !== 'undefined')\n                && (typeof window.document !== 'undefined')\n                && (typeof window.sessionStorage !== 'undefined');\n\nfunction isCanvasElement(el) {\n  if (!el || typeof el !== 'object') return false;\n  if (el.nodeType === 1 && el.nodeName) {\n    // HTMLCanvasElement\n    return true;\n  }\n  // CanvasElement\n  return !!el.isCanvasElement;\n}\n\nfunction getPixelRatio() {\n  return window && window.devicePixelRatio || 1;\n}\n\nfunction getStyle(el, property) {\n  return el.currentStyle ?\n    el.currentStyle[property] :\n    document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n}\n\nfunction getWidth(el) {\n  let width = getStyle(el, 'width');\n  if (width === 'auto') {\n    width = el.offsetWidth;\n  }\n  return parseFloat(width);\n}\n\nfunction getHeight(el) {\n  let height = getStyle(el, 'height');\n  if (height === 'auto') {\n    height = el.offsetHeight;\n  }\n  return parseFloat(height);\n}\n\nfunction getDomById(id) {\n  if (!id) {\n    return null;\n  }\n  return document.getElementById(id);\n}\n\nfunction getRelativePosition(point, canvas) {\n  const canvasDom = canvas.get('el');\n  if (!canvasDom) return point;\n  const { top, right, bottom, left } = canvasDom.getBoundingClientRect();\n\n  const paddingLeft = parseFloat(getStyle(canvasDom, 'padding-left'));\n  const paddingTop = parseFloat(getStyle(canvasDom, 'padding-top'));\n  const paddingRight = parseFloat(getStyle(canvasDom, 'padding-right'));\n  const paddingBottom = parseFloat(getStyle(canvasDom, 'padding-bottom'));\n  const width = right - left - paddingLeft - paddingRight;\n  const height = bottom - top - paddingTop - paddingBottom;\n  const pixelRatio = canvas.get('pixelRatio');\n\n  const mouseX = (point.x - left - paddingLeft) / (width) * canvasDom.width / pixelRatio;\n  const mouseY = (point.y - top - paddingTop) / (height) * canvasDom.height / pixelRatio;\n\n  return {\n    x: mouseX,\n    y: mouseY\n  };\n}\n\nfunction addEventListener(source, type, listener) {\n  source.addEventListener(type, listener, eventListenerOptions);\n}\n\nfunction removeEventListener(source, type, listener) {\n  source.removeEventListener(type, listener, eventListenerOptions);\n}\n\nfunction createEventObj(type, chart, x, y, nativeEvent) {\n  return {\n    type,\n    chart,\n    native: nativeEvent || null,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null\n  };\n}\n\nfunction createEvent(event, chart) {\n  const type = event.type;\n  let clientPoint;\n  // 说明是touch相关事件\n  if (event.touches) {\n    // https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/changedTouches\n    // 这里直接拿changedTouches就可以了，不管是touchstart, touchmove, touchend changedTouches 都是有的\n    // 为了以防万一，做个空判断\n    const touch = event.changedTouches[0] || {};\n    // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n    const { x, y, clientX, clientY } = touch;\n    // 小程序环境会有x,y，这里就直接返回\n    if (x && y) {\n      return createEventObj(type, chart, x, y, event);\n    }\n    clientPoint = { x: clientX, y: clientY };\n  } else {\n    // mouse相关事件\n    clientPoint = { x: event.clientX, y: event.clientY };\n  }\n  // 理论上应该是只有有在浏览器环境才会走到这里\n  const canvas = chart.get('canvas');\n  // 通过clientX, clientY 计算x, y\n  const point = getRelativePosition(clientPoint, canvas);\n  return createEventObj(type, chart, point.x, point.y, event);\n}\n\nfunction measureText(text, font, ctx) {\n  if (!ctx) {\n    ctx = document.createElement('canvas').getContext('2d');\n  }\n\n  ctx.font = font || '12px sans-serif';\n  return ctx.measureText(text);\n}\n\nexport {\n  isWx,\n  isMy,\n  isNode,\n  isBrowser,\n  isCanvasElement,\n  getPixelRatio,\n  getStyle,\n  getWidth,\n  getHeight,\n  getDomById,\n  getRelativePosition,\n  addEventListener,\n  removeEventListener,\n  createEvent,\n  measureText\n};\n"]},"metadata":{},"sourceType":"module"}