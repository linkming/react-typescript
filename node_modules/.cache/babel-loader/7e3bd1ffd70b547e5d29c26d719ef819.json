{"ast":null,"code":"var _jsxFileName = \"/home/sunxuming/react-typescript/src/views/home/index.tsx\";\nimport React, { Component } from 'react';\nimport './index.scss';\nimport http from './../../api/index';\nimport { Input, Radio, message } from 'antd';\nexport default class Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      songs: '',\n      searchType: '搜索歌名',\n      size: 'default',\n      data: [],\n      // qqmusic_ver=1298&new_json=1&remoteplace=txt.yqq.top&searchid=35231711271332761&\n      // t=0&aggr=1&cr=1&catZhida=1&lossless=0&flag_qc=0&p=1&n=10&w=%E7%88%B1&g_tk=5381&\n      // loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&\n      // needNewCode=0\n      params: {\n        ct: 24,\n        qqmusic_ver: 1298,\n        new_json: 1,\n        remoteplace: 'txt.yqq.top',\n        searchid: 35231711271332761,\n        t: 0,\n        aggr: 1,\n        cr: 1,\n        catZhida: 1,\n        lossless: 0,\n        flag_qc: 0,\n        p: 1,\n        n: 10,\n        w: '',\n        g_tk: 5381,\n        loginUin: 0,\n        hostUin: 0,\n        format: 'json',\n        inCharset: 'utf8',\n        outCharset: 'utf-8',\n        notice: 0,\n        platform: 'yqq.json',\n        needNewCode: 0\n      }\n    };\n\n    this.onChange = e => {\n      const str = e.target.value;\n      let data = Object.assign({}, this.state.params, {\n        w: str\n      });\n      this.setState(() => {\n        return {\n          songs: str,\n          params: data\n        };\n      });\n    };\n\n    this.onBlur = () => {\n      http.searchSongsBySinger(this.state.songs).then(res => {\n        if (res.status === 200) {\n          const {\n            data\n          } = res;\n\n          if (data.statusCode === 200) {\n            console.log(JSON.parse(data.body));\n            this.setState(() => {\n              return {\n                data: JSON.parse(data.body).data.album.list\n              };\n            });\n          } else {\n            message.error(data.errMessage, 10);\n          }\n\n          console.log(this.state.data);\n        } else {}\n      });\n    };\n  }\n\n  // constructor(props:Object){\n  //     super(props)\n  // }\n  componentDidMount() {// setTimeout(() => {\n    //   http.example().then(res=>{\n    //     console.log(res)\n    //   })\n    // }, 2500);\n  }\n\n  handleSizeChange(event) {\n    this.setState(() => {\n      return {\n        searchType: event.target.value\n      };\n    });\n    this.searchSongsByName(this.state.params); // if (this.state.songs) {\n    //   if (event.target.value==='搜索歌手') {\n    //     console.log(event.target.value)\n    //     this.onBlur()\n    //   } else {\n    //   }\n    // }\n  }\n\n  searchSongsByName(params) {\n    http.searchSongsByName(params).then(res => {\n      console.log('返回结果是res', res);\n\n      if (res.status === 200) {\n        const {\n          data\n        } = res;\n\n        if (data.statusCode === 200) {\n          console.log(JSON.parse(data.body));\n          this.setState(() => {\n            return {\n              data: JSON.parse(data.body).data.album.list\n            };\n          });\n        } else {\n          message.error(data.errMessage, 10);\n        }\n\n        console.log(this.state.data);\n      } else {}\n    });\n  }\n\n  serchSongs() {}\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"search-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"default\",\n      value: this.state.songs,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u6B4C\\u66F2\\u540D\\u79F0\",\n      onChange: this.onChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(Radio.Group, {\n      value: this.state.searchType,\n      onChange: this.handleSizeChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Radio.Button, {\n      value: \"\\u641C\\u7D22\\u6B4C\\u624B\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u641C\\u7D22\\u6B4C\\u624B\"), React.createElement(Radio.Button, {\n      value: \"\\u641C\\u7D22\\u6B4C\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"\\u641C\\u7D22\\u6B4C\\u540D\"))), React.createElement(\"ul\", {\n      className: \"ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.data.map(item => React.createElement(\"li\", {\n      key: item.albumID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: item.albumPic,\n      alt: \"\\u56FE\\u7247\\u4E0D\\u5B58\\u5728\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        paddingLeft: '12px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, item.albumName), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, item.singerName)))));\n  }\n\n}","map":{"version":3,"sources":["/home/sunxuming/react-typescript/src/views/home/index.tsx"],"names":["React","Component","http","Input","Radio","message","Home","state","songs","searchType","size","data","params","ct","qqmusic_ver","new_json","remoteplace","searchid","t","aggr","cr","catZhida","lossless","flag_qc","p","n","w","g_tk","loginUin","hostUin","format","inCharset","outCharset","notice","platform","needNewCode","onChange","e","str","target","value","Object","assign","setState","onBlur","searchSongsBySinger","then","res","status","statusCode","console","log","JSON","parse","body","album","list","error","errMessage","componentDidMount","handleSizeChange","event","searchSongsByName","serchSongs","render","bind","map","item","albumID","albumPic","paddingLeft","albumName","singerName"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,cAAP;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,KAAT,EAAeC,KAAf,EAAqBC,OAArB,QAAoC,MAApC;AAEA,eAAe,MAAMC,IAAN,SAAmBL,SAAnB,CAA6B;AAAA;AAAA;AAAA,SAC1CM,KAD0C,GACpC;AACFC,MAAAA,KAAK,EAAC,EADJ;AAEFC,MAAAA,UAAU,EAAC,MAFT;AAGFC,MAAAA,IAAI,EAAC,SAHH;AAIFC,MAAAA,IAAI,EAAC,EAJH;AAKR;AACA;AACA;AACA;AACMC,MAAAA,MAAM,EAAE;AACNC,QAAAA,EAAE,EAAE,EADE;AAENC,QAAAA,WAAW,EAAE,IAFP;AAGNC,QAAAA,QAAQ,EAAE,CAHJ;AAINC,QAAAA,WAAW,EAAE,aAJP;AAKNC,QAAAA,QAAQ,EAAE,iBALJ;AAMNC,QAAAA,CAAC,EAAE,CANG;AAONC,QAAAA,IAAI,EAAE,CAPA;AAQNC,QAAAA,EAAE,EAAE,CARE;AASNC,QAAAA,QAAQ,EAAE,CATJ;AAUNC,QAAAA,QAAQ,EAAE,CAVJ;AAWNC,QAAAA,OAAO,EAAE,CAXH;AAYNC,QAAAA,CAAC,EAAE,CAZG;AAaNC,QAAAA,CAAC,EAAE,EAbG;AAcNC,QAAAA,CAAC,EAAE,EAdG;AAeNC,QAAAA,IAAI,EAAE,IAfA;AAgBNC,QAAAA,QAAQ,EAAE,CAhBJ;AAiBNC,QAAAA,OAAO,EAAE,CAjBH;AAkBNC,QAAAA,MAAM,EAAE,MAlBF;AAmBNC,QAAAA,SAAS,EAAE,MAnBL;AAoBNC,QAAAA,UAAU,EAAE,OApBN;AAqBNC,QAAAA,MAAM,EAAE,CArBF;AAsBNC,QAAAA,QAAQ,EAAE,UAtBJ;AAuBNC,QAAAA,WAAW,EAAE;AAvBP;AATN,KADoC;;AAAA,SA8C1CC,QA9C0C,GA8ChCC,CAAD,IAAS;AACd,YAAMC,GAAG,GAAGD,CAAC,CAACE,MAAF,CAASC,KAArB;AACA,UAAI7B,IAAI,GAAG8B,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKnC,KAAL,CAAWK,MAA7B,EAAqC;AAAEc,QAAAA,CAAC,EAAEY;AAAL,OAArC,CAAX;AACA,WAAKK,QAAL,CAAc,MAAI;AACd,eAAO;AACLnC,UAAAA,KAAK,EAAC8B,GADD;AAEL1B,UAAAA,MAAM,EAACD;AAFF,SAAP;AAIH,OALD;AAMH,KAvDyC;;AAAA,SAqE1CiC,MArE0C,GAqEnC,MAAI;AACT1C,MAAAA,IAAI,CAAC2C,mBAAL,CAAyB,KAAKtC,KAAL,CAAWC,KAApC,EAA2CsC,IAA3C,CAAiDC,GAAD,IAAW;AACzD,YAAIA,GAAG,CAACC,MAAJ,KAAa,GAAjB,EAAsB;AACpB,gBAAM;AAACrC,YAAAA;AAAD,cAAQoC,GAAd;;AACA,cAAIpC,IAAI,CAACsC,UAAL,KAAkB,GAAtB,EAA2B;AACzBC,YAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,KAAL,CAAW1C,IAAI,CAAC2C,IAAhB,CAAZ;AACA,iBAAKX,QAAL,CAAc,MAAI;AAChB,qBAAO;AAAChC,gBAAAA,IAAI,EAACyC,IAAI,CAACC,KAAL,CAAW1C,IAAI,CAAC2C,IAAhB,EAAsB3C,IAAtB,CAA2B4C,KAA3B,CAAiCC;AAAvC,eAAP;AACD,aAFD;AAGD,WALD,MAKK;AACHnD,YAAAA,OAAO,CAACoD,KAAR,CAAc9C,IAAI,CAAC+C,UAAnB,EAA+B,EAA/B;AACD;;AACDR,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5C,KAAL,CAAWI,IAAvB;AACD,SAXD,MAWO,CACN;AACF,OAdD;AAeD,KArFyC;AAAA;;AAoC1C;AACA;AACA;AACAgD,EAAAA,iBAAiB,GAAE,CACjB;AACA;AACA;AACA;AACA;AACD;;AAWDC,EAAAA,gBAAgB,CAACC,KAAD,EAAW;AACzB,SAAKlB,QAAL,CAAc,MAAI;AAChB,aAAO;AAAClC,QAAAA,UAAU,EAACoD,KAAK,CAACtB,MAAN,CAAaC;AAAzB,OAAP;AACD,KAFD;AAGA,SAAKsB,iBAAL,CAAuB,KAAKvD,KAAL,CAAWK,MAAlC,EAJyB,CAKzB;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AAkBDkD,EAAAA,iBAAiB,CAAClD,MAAD,EAAe;AAC9BV,IAAAA,IAAI,CAAC4D,iBAAL,CAAuBlD,MAAvB,EAA+BkC,IAA/B,CAAqCC,GAAD,IAAW;AAC7CG,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBJ,GAAvB;;AACA,UAAIA,GAAG,CAACC,MAAJ,KAAa,GAAjB,EAAsB;AACpB,cAAM;AAACrC,UAAAA;AAAD,YAAQoC,GAAd;;AACA,YAAIpC,IAAI,CAACsC,UAAL,KAAkB,GAAtB,EAA2B;AACzBC,UAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,KAAL,CAAW1C,IAAI,CAAC2C,IAAhB,CAAZ;AACA,eAAKX,QAAL,CAAc,MAAI;AAChB,mBAAO;AAAChC,cAAAA,IAAI,EAACyC,IAAI,CAACC,KAAL,CAAW1C,IAAI,CAAC2C,IAAhB,EAAsB3C,IAAtB,CAA2B4C,KAA3B,CAAiCC;AAAvC,aAAP;AACD,WAFD;AAGD,SALD,MAKK;AACHnD,UAAAA,OAAO,CAACoD,KAAR,CAAc9C,IAAI,CAAC+C,UAAnB,EAA+B,EAA/B;AACD;;AACDR,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5C,KAAL,CAAWI,IAAvB;AACD,OAXD,MAWO,CAEN;AACF,KAhBD;AAiBD;;AACDoD,EAAAA,UAAU,GAAE,CAEX;;AACDC,EAAAA,MAAM,GAAE;AACN,WAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACN;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,SAAZ;AAAsB,MAAA,KAAK,EAAE,KAAKzD,KAAL,CAAWC,KAAxC;AAA+C,MAAA,WAAW,EAAC,4CAA3D;AACA,MAAA,QAAQ,EAAE,KAAK4B,QAAL,CAAc6B,IAAd,CAAmB,IAAnB,CADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGI,oBAAC,KAAD,CAAO,KAAP;AAAa,MAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWE,UAA/B;AAA2C,MAAA,QAAQ,EAAE,KAAKmD,gBAAL,CAAsBK,IAAtB,CAA2B,IAA3B,CAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,KAAK,EAAC,0BAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADA,EAEA,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,KAAK,EAAC,0BAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAFA,CAHJ,CADM,EASN;AAAI,MAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK1D,KAAL,CAAWI,IAAX,CAAgBuD,GAAhB,CAAsBC,IAAD,IAAc;AAAI,MAAA,GAAG,EAAEA,IAAI,CAACC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAClC;AAAK,MAAA,GAAG,EAAED,IAAI,CAACE,QAAf;AAAyB,MAAA,GAAG,EAAC,gCAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADkC,EAElC;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,WAAW,EAAC;AAAb,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoCH,IAAI,CAACI,SAAzC,CAFkC,EAGlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOJ,IAAI,CAACK,UAAZ,CAHkC,CAAnC,CADH,CATM,CAAR;AAiBD;;AA9HyC","sourcesContent":["import React, { Component } from 'react'\nimport './index.scss'\nimport http from './../../api/index'\nimport { Input,Radio,message } from 'antd';\n\nexport default class Home extends Component {\n  state={\n      songs:'',\n      searchType:'搜索歌名',\n      size:'default',\n      data:[],\n// qqmusic_ver=1298&new_json=1&remoteplace=txt.yqq.top&searchid=35231711271332761&\n// t=0&aggr=1&cr=1&catZhida=1&lossless=0&flag_qc=0&p=1&n=10&w=%E7%88%B1&g_tk=5381&\n// loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&\n// needNewCode=0\n      params: {\n        ct: 24,\n        qqmusic_ver: 1298,\n        new_json: 1,\n        remoteplace: 'txt.yqq.top',\n        searchid: 35231711271332761,\n        t: 0,\n        aggr: 1,\n        cr: 1,\n        catZhida: 1,\n        lossless: 0,\n        flag_qc: 0,\n        p: 1,\n        n: 10,\n        w: '',\n        g_tk: 5381,\n        loginUin: 0,\n        hostUin: 0,\n        format: 'json',\n        inCharset: 'utf8',\n        outCharset: 'utf-8',\n        notice: 0,\n        platform: 'yqq.json',\n        needNewCode: 0,\n      }\n  }\n  // constructor(props:Object){\n  //     super(props)\n  // }\n  componentDidMount(){\n    // setTimeout(() => {\n    //   http.example().then(res=>{\n    //     console.log(res)\n    //   })\n    // }, 2500);\n  }\n  onChange=(e:any)=>{\n      const str = e.target.value\n      let data = Object.assign({}, this.state.params, { w: str })\n      this.setState(()=>{\n          return {\n            songs:str,\n            params:data,\n          }\n      })\n  }\n  handleSizeChange(event:any){\n    this.setState(()=>{\n      return {searchType:event.target.value}\n    })\n    this.searchSongsByName(this.state.params)\n    // if (this.state.songs) {\n    //   if (event.target.value==='搜索歌手') {\n    //     console.log(event.target.value)\n    //     this.onBlur()\n    //   } else {\n    //   }\n    // }\n  }\n  onBlur=()=>{\n    http.searchSongsBySinger(this.state.songs).then((res:any)=>{\n      if (res.status===200) {\n        const {data}= res\n        if (data.statusCode===200) {\n          console.log(JSON.parse(data.body))\n          this.setState(()=>{\n            return {data:JSON.parse(data.body).data.album.list}\n          })\n        }else{\n          message.error(data.errMessage, 10);\n        }\n        console.log(this.state.data)\n      } else {\n      }\n    })\n  }\n  searchSongsByName(params:object){\n    http.searchSongsByName(params).then((res:any)=>{\n      console.log('返回结果是res',res)\n      if (res.status===200) {\n        const {data}= res\n        if (data.statusCode===200) {\n          console.log(JSON.parse(data.body))\n          this.setState(()=>{\n            return {data:JSON.parse(data.body).data.album.list}\n          })\n        }else{\n          message.error(data.errMessage, 10);\n        }\n        console.log(this.state.data)\n      } else {\n        \n      }\n    })\n  }\n  serchSongs(){\n\n  }\n  render(){\n    return (<div>\n      <div className=\"search-input\">\n        <Input size=\"default\" value={this.state.songs} placeholder=\"请输入歌曲名称\" \n        onChange={this.onChange.bind(this)} />\n          <Radio.Group value={this.state.searchType} onChange={this.handleSizeChange.bind(this)}>\n          <Radio.Button value=\"搜索歌手\">搜索歌手</Radio.Button>\n          <Radio.Button value=\"搜索歌名\">搜索歌名</Radio.Button>\n        </Radio.Group>\n      </div>\n      <ul className=\"ul\">\n        {this.state.data.map( (item:any) => <li key={item.albumID}>\n          <img src={item.albumPic} alt=\"图片不存在\"/>\n          <span style={{paddingLeft:'12px'}}>{item.albumName}</span>\n          <span>{item.singerName}</span>\n        </li> )}\n      </ul>\n    </div>)\n  }\n}"]},"metadata":{},"sourceType":"module"}