{"ast":null,"code":"var _jsxFileName = \"/home/sunxuming/react-typescript/src/views/home/index.tsx\";\nimport React, { Component } from 'react';\nimport './index.scss';\nimport http from './../../api/index';\nimport { Input, Radio, message } from 'antd';\nexport default class Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      songs: '',\n      searchType: '搜索歌名',\n      size: 'default',\n      data: [],\n      // qqmusic_ver=1298&new_json=1&remoteplace=txt.yqq.top&searchid=35231711271332761&t=0&aggr=1&cr=1&catZhida=1&lossless=0&flag_qc=0&p=1&n=10&w=%E7%88%B1&g_tk=5381&loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0\n      params: {\n        ct: 24,\n        qqmusic_ver: 1298,\n        format: 'json',\n        inCharset: 'utf-8',\n        outCharset: 'utf-8',\n        notice: 0,\n        platform: 'h5',\n        needNewCode: 1,\n        cid: 205360772,\n        reqtype: 1,\n        cmd: 8,\n        needmusiccrit: 0,\n        pagesize: 3,\n        lasthotcommentid: 0,\n        qq: 0,\n        pagenum: 0,\n        biztype: 1,\n        topid: 105468975,\n        ct: 999,\n        _: new Date().valueOf(),\n        msg_comment_id: 0\n      }\n    };\n\n    this.onChange = e => {\n      const str = e.target.value;\n      this.setState(() => {\n        return {\n          songs: str\n        };\n      });\n    };\n\n    this.onBlur = () => {\n      http.searchSongsBySinger(this.state.songs).then(res => {\n        if (res.status === 200) {\n          const {\n            data\n          } = res;\n\n          if (data.statusCode === 200) {\n            console.log(JSON.parse(data.body));\n            this.setState(() => {\n              return {\n                data: JSON.parse(data.body).data.album.list\n              };\n            });\n          } else {\n            message.error(data.errMessage, 10);\n          }\n\n          console.log(this.state.data);\n        } else {}\n      });\n    };\n  }\n\n  // constructor(props:Object){\n  //     super(props)\n  // }\n  componentDidMount() {\n    setTimeout(() => {\n      http.example().then(res => {\n        console.log(res);\n      });\n    }, 2500);\n  }\n\n  handleSizeChange(event) {\n    this.setState(() => {\n      return {\n        searchType: event.target.value\n      };\n    });\n\n    if (this.state.songs) {\n      if (event.target.value === '搜索歌手') {\n        console.log(event.target.value);\n        this.onBlur();\n      } else {\n        this.searchSongsByName();\n      }\n    }\n  }\n\n  searchSongsByName() {\n    http.searchSongsByName(this.state.songs).then(res => {\n      console.log(res);\n\n      if (res.status === 200) {\n        const {\n          data\n        } = res;\n\n        if (data.statusCode === 200) {\n          console.log(JSON.parse(data.body));\n          this.setState(() => {\n            return {\n              data: JSON.parse(data.body).data.album.list\n            };\n          });\n        } else {\n          message.error(data.errMessage, 10);\n        }\n\n        console.log(this.state.data);\n      } else {}\n    });\n  }\n\n  serchSongs() {}\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"search-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"default\",\n      value: this.state.songs,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u6B4C\\u66F2\\u540D\\u79F0\",\n      onChange: this.onChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Radio.Group, {\n      value: this.state.searchType,\n      onChange: this.handleSizeChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Radio.Button, {\n      value: \"\\u641C\\u7D22\\u6B4C\\u624B\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"\\u641C\\u7D22\\u6B4C\\u624B\"), React.createElement(Radio.Button, {\n      value: \"\\u641C\\u7D22\\u6B4C\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"\\u641C\\u7D22\\u6B4C\\u540D\"))), React.createElement(\"ul\", {\n      className: \"ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, this.state.data.map(item => React.createElement(\"li\", {\n      key: item.albumID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: item.albumPic,\n      alt: \"\\u56FE\\u7247\\u4E0D\\u5B58\\u5728\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        paddingLeft: '12px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, item.albumName), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, item.singerName)))));\n  }\n\n}","map":{"version":3,"sources":["/home/sunxuming/react-typescript/src/views/home/index.tsx"],"names":["React","Component","http","Input","Radio","message","Home","state","songs","searchType","size","data","params","ct","qqmusic_ver","format","inCharset","outCharset","notice","platform","needNewCode","cid","reqtype","cmd","needmusiccrit","pagesize","lasthotcommentid","qq","pagenum","biztype","topid","_","Date","valueOf","msg_comment_id","onChange","e","str","target","value","setState","onBlur","searchSongsBySinger","then","res","status","statusCode","console","log","JSON","parse","body","album","list","error","errMessage","componentDidMount","setTimeout","example","handleSizeChange","event","searchSongsByName","serchSongs","render","bind","map","item","albumID","albumPic","paddingLeft","albumName","singerName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './index.scss'\nimport http from './../../api/index'\nimport { Input,Radio,message } from 'antd';\n\nexport default class Home extends Component {\n  state={\n      songs:'',\n      searchType:'搜索歌名',\n      size:'default',\n      data:[],\n// qqmusic_ver=1298&new_json=1&remoteplace=txt.yqq.top&searchid=35231711271332761&t=0&aggr=1&cr=1&catZhida=1&lossless=0&flag_qc=0&p=1&n=10&w=%E7%88%B1&g_tk=5381&loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0\n      params: {\n        ct: 24,\n        qqmusic_ver: 1298,\n        format: 'json',\n        inCharset: 'utf-8',\n        outCharset: 'utf-8',\n        notice: 0,\n        platform: 'h5',\n        needNewCode: 1,\n        cid: 205360772,\n        reqtype: 1,\n        cmd: 8,\n        needmusiccrit: 0,\n        pagesize: 3,\n        lasthotcommentid: 0,\n        qq: 0,\n        pagenum: 0,\n        biztype: 1,\n        topid: 105468975,\n        ct: 999,\n        _: new Date().valueOf(),\n        msg_comment_id: 0\n      }\n  }\n  // constructor(props:Object){\n  //     super(props)\n  // }\n  componentDidMount(){\n    setTimeout(() => {\n      http.example().then(res=>{\n        console.log(res)\n      })\n    }, 2500);\n  }\n  onChange=(e:any)=>{\n      const str = e.target.value\n      this.setState(()=>{\n          return {songs:str}\n      })\n  }\n  handleSizeChange(event:any){\n    this.setState(()=>{\n      return {searchType:event.target.value}\n    })\n    if (this.state.songs) {\n      if (event.target.value==='搜索歌手') {\n        console.log(event.target.value)\n        this.onBlur()\n      } else {\n        this.searchSongsByName()\n      }\n    }\n  }\n  onBlur=()=>{\n    http.searchSongsBySinger(this.state.songs).then((res:any)=>{\n      if (res.status===200) {\n        const {data}= res\n        if (data.statusCode===200) {\n          console.log(JSON.parse(data.body))\n          this.setState(()=>{\n            return {data:JSON.parse(data.body).data.album.list}\n          })\n        }else{\n          message.error(data.errMessage, 10);\n        }\n        console.log(this.state.data)\n      } else {\n      }\n    })\n  }\n  searchSongsByName(){\n    http.searchSongsByName(this.state.songs).then((res:any)=>{\n      console.log(res)\n      if (res.status===200) {\n        const {data}= res\n        if (data.statusCode===200) {\n          console.log(JSON.parse(data.body))\n          this.setState(()=>{\n            return {data:JSON.parse(data.body).data.album.list}\n          })\n        }else{\n          message.error(data.errMessage, 10);\n        }\n        console.log(this.state.data)\n      } else {\n        \n      }\n    })\n  }\n  serchSongs(){\n\n  }\n  render(){\n    return (<div>\n      <div className=\"search-input\">\n        <Input size=\"default\" value={this.state.songs} placeholder=\"请输入歌曲名称\" \n        onChange={this.onChange.bind(this)} />\n          <Radio.Group value={this.state.searchType} onChange={this.handleSizeChange.bind(this)}>\n          <Radio.Button value=\"搜索歌手\">搜索歌手</Radio.Button>\n          <Radio.Button value=\"搜索歌名\">搜索歌名</Radio.Button>\n        </Radio.Group>\n      </div>\n      <ul className=\"ul\">\n        {this.state.data.map( (item:any) => <li key={item.albumID}>\n          <img src={item.albumPic} alt=\"图片不存在\"/>\n          <span style={{paddingLeft:'12px'}}>{item.albumName}</span>\n          <span>{item.singerName}</span>\n        </li> )}\n      </ul>\n    </div>)\n  }\n}"]},"metadata":{},"sourceType":"module"}